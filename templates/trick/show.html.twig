{% extends "base.html.twig" %}
{% block title %}
	{{ trick.name }}
{% endblock %}
{% block body %}
	<h1>{{ trick.name }}</h1>
	<p>{{ trick.description }}</p>

	<p>
		date de création :
		{{trick.createdAt|date("d/m/Y")}}
	</p>

	{% if trick.updatedAt is not null %}
		<p>
			date de modification :
			{{trick.updatedAt|date("d/m/Y")}}
		</p>
	{% endif %}

	<p>
		Catégorie :
		{{ trick.category.name }}
	</p>

	<h2>Videos</h2>
	{% for video in trick.videos %}
		<iframe width="420" height="315" src={{ video.url }}></iframe>
	{% endfor %}

	<h2>Images</h2>
	{% for image in trick.images %}
		<img src={{ asset('uploads/' ~ image.name) }} alt={{image.alt}}>
	{% endfor %}

	<hr/>


	<h2>Nouveau commentaire</h2>

	{% if app.user %}
		{{ form_start(commentForm) }}

		<div>
			{{ form_row(commentForm.content) }}
		</div>

		<button type="submit">Ajouter</button>

		{{ form_end(commentForm) }}

	{% else %}
		<p>Vous devez être connecté pour ajouter un commentaire</p>
		<a href="{{ path("auth_register") }}">Inscription</a>
		<a href="{{ path("auth_login") }}">Login</a>
	{% endif %}


	<h2>Commentaires</h2>
	{% for comment in trick.comments %}
		<b>{{comment.user.userIdentifier }}</b>
		<p>{{ comment.content }}</p>
		<p>date de création :
			{{comment.createdAt|date("d/m/Y")}}</p>
		<br>
	{% endfor %}
{% endblock %}
